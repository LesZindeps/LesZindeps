#{extends 'Admin/mainAuthenticated.html' /}
#{set title:'Mon profil' /}

#{set moreScripts:'
<!--
  ~ Copyright(c) 2010 Les Zindeps.
  ~
  ~ The code source of this project is distributed
  ~ under the Affero GPL GNU AFFERO GENERAL PUBLIC LICENSE
  ~ Version 3, 19 November 2007
  ~
  ~ This file is part of project LesZindeps. The source code is
  ~ hosted on GitHub. The initial project was launched by
  ~ Nicolas Martignole.
  ~
  ~ LesZindeps is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ LesZindeps is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~
  ~ Please see COPYING.AGPL.txt for the full text license
  ~ or online http://www.gnu.org/licenses/agpl.html
  -->

<script src="/public/javascripts/jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="/public/javascripts/jquery-ui-1.7.2.custom.min.js" type="text/javascript" charset="utf-8"></script>' /}


<div class="grid_8 prefix_2">
    #{ifErrors}
    <div class="error">
        <h2>Erreur</h2>
        <ul>
            #{errors}
            <li>${error}</li>
            #{/errors}
        </ul>
    </div>
    #{/ifErrors}

    #{if flash.error}
    <div class="error">
        <h2>${flash.error}</h2>
    </div>
    #{/if}

    #{if flash.success}
    <div class="successbox">
        ${flash.success}
    </div>
    #{/if}

    <!-- Tag play cree dans views/tags -->
    #{jQueryValidate class:models.Zindep.class, key:'zindep' /}

    #{form id:'joinForm', action:@doUpdateMyProfile()}

    <fieldset>
    <legend>Votre profil</legend>

    <p><label>Adresse email :</label> ${zindep.email}</p>


     #{field 'zindep.emailBackup'}
    <p>
        <label>Email secondaire :</label>
        <input type="text" id="${field.id}" name="${field.name}"
               value="${field.value}"
               class="${field.errorClass}"
               size="90" maxlength="255"
               title="Optionel">
        <span class="error">${field.error}</span><br/>
    </p>
    #{/}

    #{field 'zindep.firstName'}
    <p>
        <label>Pr√©nom :</label>
        <input type="text" id="${field.id}" name="${field.name}" value="${field.value}" class="${field.errorClass}"
               size="90" maxlength="255">
        <span class="error">${field.error}</span><br/>
    </p>
    #{/}

    #{field 'zindep.lastName'}
    <p>
        <label>Nom :</label>
        <input type="text" id="${field.id}" name="${field.name}" value="${field.value}" class="${field.errorClass}"
               size="90" maxlength="255">
        <span class="error">${field.error}</span><br/>
    </p>
    #{/}

    #{field 'zindep.location'}
    <p>
        <label>Ville :</label>
        <input type="text" id="${field.id}" name="${field.name}" value="${field.value}" class="${field.errorClass}"
               size="90" maxlength="255">
        <span class="error">${field.error}</span><br/>
    </p>
    #{/}

    #{field 'zindep.bio'}
    <p>
        <label>Bio :</label>
        <textarea id="${field.id}" name="${field.name}" cols="60" rows="6"
                  class="${field.errorClass}">${field.value}</textarea>
        <span class="error">${field.error}</span><br/>
    </p>
    #{/}

    #{field 'zindep.techno'}
    <p>
        <label>Technologies :</label>
        <textarea id="${field.id}" name="${field.name}" cols="60" rows="6"
                  class="${field.errorClass}">${field.value}</textarea>
        <span class="error">${field.error}</span><br/>
    </p>
    #{/}


    #{field 'zindep.memberSince'}
    <p>
        <label>Membre depuis :</label>
        <input type="text" id="${field.id}" name="${field.name}" value="${field.value?.format('dd/MM/yy')}"
               class="${field.errorClass}"
               size="90" maxlength="255">
        <span class="error">${field.error}</span><br/>
        <em>Format: dd/mm/yy</em>
    </p>
    #{/}
    </fieldset>

    <script type="text/javascript" charset="utf-8">
        $("#zindep_memberSince").datepicker(
        {dateFormat:'dd/mm/yy', showAnim:'fadeIn',
            dayNamesMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],
            firstDay:'1'}
                )
    </script>


    <p class="buttons"><input type="submit" value="Enregistrer"/></p>
    #{/form}

</div>

