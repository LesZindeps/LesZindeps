<!--
  ~ Copyright(c) 2010 Les Zindeps.
  ~
  ~ The code source of this project is distributed
  ~ under the Affero GPL GNU AFFERO GENERAL PUBLIC LICENSE
  ~ Version 3, 19 November 2007
  ~
  ~ This file is part of project LesZindeps. The source code is
  ~ hosted on GitHub. The initial project was launched by
  ~ Nicolas Martignole.
  ~
  ~ LesZindeps is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ LesZindeps is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~
  ~ Please see COPYING.AGPL.txt for the full text license
  ~ or online http://www.gnu.org/licenses/agpl.html
  -->

<script type="text/javascript" src="/public/javascripts/jquery.validate.js"></script>

<script type="text/javascript">
	$(document).ready(function(){
  		$("#joinForm").validate({
			rules: {
			%{
				play.data.validation.Validation.getValidators(_class, _key).each() {
					out.println "'" + it.key + "': {"
					for(validator in it.value) {
						switch (validator.annotation.annotationType().name.substring(21)) {
						    case "Required":
						        out.println "required: true,"
								break;
							case "MinSize":
						        out.println "minlength: " + validator.annotation.value() + ","
								break;
							case "Range":
						        out.println "range: [" + validator.annotation.min() + "," + validator.annotation.max() + "]," 
								break;
							case "Email":
						        out.println "email: true,"
								break;
							case "Equals":
						        out.println "equalTo: 'input[name=" + validator.params.equalsTo + "]',"
								break;
						}
					}
					out.println "},"
				}
			}%
			}
		});	
	});
</script>